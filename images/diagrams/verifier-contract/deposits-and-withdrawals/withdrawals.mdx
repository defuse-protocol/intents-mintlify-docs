---
title: 'Withdrawals'
description: 'How to withdraw tokens from the Verifier contract'
icon: 'arrow-right-from-bracket'
---

After a successful [deposit](/integration/verifier-contract/deposits-and-withdrawals/deposits), tokens are assigned to your account in the Verifier contract. You retain full ownership and control, and can withdraw at any time.

## Withdrawal methods

There are two ways to withdraw tokens:

1. **Direct function call** on the Verifier contract
2. **Signed intent** submitted via `execute_intents`

<Info>
When using direct function calls, the token ID is used **without** a prefix (e.g., `wrap.near`).

When using signed intents, the token ID is prefixed (e.g., `nep141:wrap.near`).
</Info>

## Withdrawing fungible tokens (NEP-141)

### Via direct function call

Use [ft_withdraw](https://near.github.io/intents/defuse/tokens/nep141/trait.FungibleTokenWithdrawer.html#tymethod.ft_withdraw) with `near-cli`:

```bash
near contract call-function as-transaction intents.near ft_withdraw \
  json-args '{
    "token": "wrap.near",
    "receiver_id": "alice.near",
    "amount": "1000"
  }' \
  prepaid-gas '100.0 Tgas' \
  attached-deposit '1 yoctoNEAR' \
  sign-as alice.near \
  network-config mainnet sign-with-keychain send
```

### Via signed intent

```json
{
  "standard": "nep413",
  "payload": {
    "recipient": "intents.near",
    "nonce": "Vij2xgAlKBKzgNPJFViEQRhPvveC+P9xRwOXFW/IK5w=",
    "message": "{\"deadline\":\"2025-05-20T13:29:34.360380Z\",\"intents\":[{\"intent\":\"ft_withdraw\",\"token\":\"wrap.near\",\"receiver_id\":\"alice.near\",\"amount\":\"1000\"}],\"signer_id\":\"user1.test.near\"}"
  },
  "public_key": "ed25519:C3jXhkGhEx88Gj7XKtUziJKXEBMRaJ67bWFkxJikVxZ2",
  "signature": "ed25519:5op5APf9YaRznvMVwZBw6GGk9ychU3QtNRKJSxuVajHFMQths4ZZMRoAENU1zWhjinqz8KuLNyM9589c86opopyT"
}
```

## Withdrawal functions by token type

| Token Type | Direct Function | Intent |
|------------|-----------------|--------|
| NEP-141 (Fungible) | [ft_withdraw](https://near.github.io/intents/defuse/tokens/nep141/trait.FungibleTokenWithdrawer.html#tymethod.ft_withdraw) | [FtWithdraw](https://near.github.io/intents/defuse_core/intents/tokens/struct.FtWithdraw.html) |
| NEP-171 (NFT) | [nft_withdraw](https://near.github.io/intents/defuse/tokens/nep171/trait.NonFungibleTokenWithdrawer.html#tymethod.nft_withdraw) | [NftWithdraw](https://near.github.io/intents/defuse_core/intents/tokens/struct.NftWithdraw.html) |
| NEP-245 (Multi Token) | [mt_withdraw](https://near.github.io/intents/defuse/tokens/nep245/trait.MultiTokenWithdrawer.html#tymethod.mt_withdraw) | [MtWithdraw](https://near.github.io/intents/defuse_core/intents/tokens/struct.MtWithdraw.html) |
| Native NEAR | N/A | [NativeWithdraw](https://near.github.io/intents/defuse_core/intents/tokens/struct.NativeWithdraw.html) |

## Refunds on failed withdrawals

<Warning>
**Important:** This section applies to all withdrawal types except `NativeWithdraw`, since native NEAR transfers cannot fail.
</Warning>

A refund restores your balance when a withdrawal fails on the target smart contract. The behavior depends on the `msg` parameter in your withdrawal request.

### How `msg` affects refunds

The [withdraw function](https://near.github.io/intents/defuse/tokens/nep141/trait.FungibleTokenWithdrawer.html#tymethod.ft_withdraw) has a `msg` parameter from the [NEP-141 standard](https://nomicon.io/Standards/Tokens/FungibleToken/Core):

| `msg` Value | Transfer Method | Refund on Failure? |
|-------------|-----------------|-------------------|
| Not specified or `null` | `ft_transfer` | Yes |
| Any string value (including `""`) | `ft_transfer_call` | No |

<Info>
This same logic applies to Multi Token and NFT transfers with their corresponding functions: `nft_transfer`, `nft_transfer_call`, `mt_transfer`, and `mt_transfer_call`.
</Info>

### Why refunds don't always work

Due to the asynchronous and sharded nature of the NEAR blockchain, refunds can only be processed when `ft_transfer` is used (i.e., when `msg` is not specified or is `null`).

The refund issue occurs when an asynchronous call to another smart contract (e.g., a USDC contract) fails. If an error happens within the Verifier contract itself, your balance won't change.

### Summary

| Withdrawal Request | `msg` Parameter | Refund Possible? |
|-------------------|-----------------|------------------|
| `FtWithdraw` intent or `ft_withdraw` call | No (or `null`) | Yes |
| `FtWithdraw` intent or `ft_withdraw` call | Yes, as string | No |
| `MtWithdraw` intent or `mt_withdraw` call | No (or `null`) | Yes |
| `MtWithdraw` intent or `mt_withdraw` call | Yes, as string | No |
| `NftWithdraw` intent or `nft_withdraw` call | No (or `null`) | Yes |
| `NftWithdraw` intent or `nft_withdraw` call | Yes, as string | No |

<Tip>
**Recommendation:** To ensure a successful withdrawal with refund protection, avoid specifying `msg` or set it explicitly to `null`. For programmable actions on the receiving contract, perform them from your own account using `ft_transfer_call`.
</Tip>
